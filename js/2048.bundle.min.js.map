{"version":3,"sources":["2048.bundle.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","lastTime","vendors","x","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","2","GameManager","InputManager","HTMLView","LocalStorageManager","document","body","./game_manager","./html_view","./input_manager","./local_storage_manager","3","Function","prototype","bind","target","self","this","args","Array","apply","4","Element","documentElement","obj","prop","getter","push","splice","join","DOMTokenList","add","token","contains","el","className","toString","indexOf","item","index","remove","toggle","HTMLElement","Object","defineProperty","get","__defineGetter__","classes","replace","split","5","Grid","Tile","container","size","View","StorageManager","storageManager","view","append","inputManager","startTiles","bindGameContainer","gameContainer","bindRestartButton","restartButton","retryButton","bindKeepPlayingButton","keepPlayingButton","on","move","restart","keepPlaying","helpTimeout","setup","blinkHelp","clearGameState","continueGame","isGameTerminated","over","won","previousState","getGameState","grid","cells","score","addStartTiles","actuate","addRandomTile","cellsAvailable","value","random","tile","randomAvailableCell","insertTile","getBestScore","setBestScore","setGameState","serialize","bestScore","terminated","prepareTiles","eachCell","y","mergedFrom","savePosition","moveTile","cell","updatePosition","direction","vector","getVector","traversals","buildTraversals","moved","forEach","cellContent","positions","findFarthestPosition","next","merged","removeTile","farthest","positionsEqual","movesAvailable","0","pos","reverse","previous","withinBounds","cellAvailable","tileMatchesAvailable","other","first","second","./grid","./tile","6","fromState","empty","row","state","position","availableCells","floor","cellOccupied","cellState","7","createElement","classList","messageContainer","messageContainerParagraph","lower","textContent","gridContainer","j","tileContainer","scoreWrapper","scoreLabel","scoreContainer","hiScoreWrapper","hiScoreLabel","bestContainer","helpText","helpHand","metadata","clearContainer","column","addTile","updateScore","updateBestScore","message","clearMessage","firstChild","removeChild","wrapper","inner","previousPosition","positionClass","applyClasses","appendChild","element","setAttribute","normalizePosition","difference","addition","type","showHelp","hideHelp","8","events","navigator","msPointerEnabled","eventTouchstart","eventTouchmove","eventTouchend","event","emit","data","callbacks","bindKeyboard","map","38","39","40","37","75","76","74","72","87","68","83","65","addEventListener","modifiers","altKey","ctrlKey","metaKey","shiftKey","mapped","which","undefined","preventDefault","touchStartClientX","touchStartClientY","touches","targetTouches","pageX","pageY","clientX","clientY","touchEndClientX","touchEndClientY","changedTouches","dx","absDx","abs","dy","absDy","button","bindButtonPress","fn","9","bestScoreKey","gameStateKey","supported","localStorageSupported","storage","localStorage","fakeStorage","_data","setItem","val","String","getItem","hasOwnProperty","removeItem","clear","error","stateJSON","JSON","parse","gameState","stringify","10","./animframe_polyfill","./application","./bind_polyfill","./classlist_polyfill","11"],"mappings":"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","file":"2048.bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\n(function () {\n  var lastTime = 0;\n  var vendors = ['webkit', 'moz'];\n\n  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n  }\n\n  if (!window.requestAnimationFrame) {\n    window.requestAnimationFrame = function (callback) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = window.setTimeout(function () {\n        callback(currTime + timeToCall);\n      }, timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n  }\n\n  if (!window.cancelAnimationFrame) {\n    window.cancelAnimationFrame = function (id) {\n      clearTimeout(id);\n    };\n  }\n})();\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nvar GameManager = require('./game_manager');\n\nvar InputManager = require('./input_manager');\n\nvar HTMLView = require('./html_view');\n\nvar LocalStorageManager = require('./local_storage_manager'); // Wait till the browser is ready to render the game (avoids glitches)\n\n\nwindow.requestAnimationFrame(function () {\n  new GameManager(window.document.body, 4, InputManager, HTMLView, LocalStorageManager);\n});\n\n},{\"./game_manager\":5,\"./html_view\":7,\"./input_manager\":8,\"./local_storage_manager\":9}],3:[function(require,module,exports){\n\"use strict\";\n\nFunction.prototype.bind = Function.prototype.bind || function (target) {\n  var self = this;\n  return function (args) {\n    if (!(args instanceof Array)) {\n      args = [args];\n    }\n\n    self.apply(target, args);\n  };\n};\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\n(function () {\n  if (typeof window.Element === \"undefined\" || \"classList\" in document.documentElement) {\n    return;\n  }\n\n  var prototype = Array.prototype,\n      push = prototype.push,\n      splice = prototype.splice,\n      join = prototype.join;\n\n  function DOMTokenList(el) {\n    this.el = el; // The className needs to be trimmed and split on whitespace\n    // to retrieve a list of classes.\n\n    var classes = el.className.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\n\n    for (var i = 0; i < classes.length; i++) {\n      push.call(this, classes[i]);\n    }\n  }\n\n  DOMTokenList.prototype = {\n    add: function add(token) {\n      if (this.contains(token)) return;\n      push.call(this, token);\n      this.el.className = this.toString();\n    },\n    contains: function contains(token) {\n      return this.el.className.indexOf(token) != -1;\n    },\n    item: function item(index) {\n      return this[index] || null;\n    },\n    remove: function remove(token) {\n      if (!this.contains(token)) return;\n\n      for (var i = 0; i < this.length; i++) {\n        if (this[i] == token) break;\n      }\n\n      splice.call(this, i, 1);\n      this.el.className = this.toString();\n    },\n    toString: function toString() {\n      return join.call(this, ' ');\n    },\n    toggle: function toggle(token) {\n      if (!this.contains(token)) {\n        this.add(token);\n      } else {\n        this.remove(token);\n      }\n\n      return this.contains(token);\n    }\n  };\n  window.DOMTokenList = DOMTokenList;\n\n  function defineElementGetter(obj, prop, getter) {\n    if (Object.defineProperty) {\n      Object.defineProperty(obj, prop, {\n        get: getter\n      });\n    } else {\n      obj.__defineGetter__(prop, getter);\n    }\n  }\n\n  defineElementGetter(HTMLElement.prototype, 'classList', function () {\n    return new DOMTokenList(this);\n  });\n})();\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nvar Grid = require('./grid');\n\nvar Tile = require('./tile');\n\nfunction GameManager(container, size, InputManager, View, StorageManager) {\n  this.size = size; // Size of the grid\n\n  this.storageManager = new StorageManager();\n  this.view = new View();\n  container.append(this.view.container);\n  this.inputManager = new InputManager();\n  this.startTiles = 2;\n  this.inputManager.bindGameContainer(this.view.gameContainer);\n  this.inputManager.bindRestartButton(this.view.restartButton);\n  this.inputManager.bindRestartButton(this.view.retryButton);\n  this.inputManager.bindKeepPlayingButton(this.view.keepPlayingButton);\n  this.inputManager.on(\"move\", this.move.bind(this));\n  this.inputManager.on(\"restart\", this.restart.bind(this));\n  this.inputManager.on(\"keepPlaying\", this.keepPlaying.bind(this));\n  this.helpTimeout = null;\n  this.setup();\n  this.view.blinkHelp();\n} // Restart the game\n\n\nGameManager.prototype.restart = function () {\n  this.storageManager.clearGameState();\n  this.view.continueGame(); // Clear the game won/lost message\n\n  this.setup();\n  this.view.blinkHelp();\n}; // Keep playing after winning (allows going over 2048)\n\n\nGameManager.prototype.keepPlaying = function () {\n  this.keepPlaying = true;\n  this.view.continueGame(); // Clear the game won/lost message\n}; // Return true if the game is lost, or has won and the user hasn't kept playing\n\n\nGameManager.prototype.isGameTerminated = function () {\n  return this.over || this.won && !this.keepPlaying;\n}; // Set up the game\n\n\nGameManager.prototype.setup = function () {\n  var previousState = this.storageManager.getGameState(); // Reload the game from a previous game if present\n\n  if (previousState) {\n    this.grid = new Grid(previousState.grid.size, previousState.grid.cells); // Reload grid\n\n    this.score = previousState.score;\n    this.over = previousState.over;\n    this.won = previousState.won;\n    this.keepPlaying = previousState.keepPlaying;\n  } else {\n    this.grid = new Grid(this.size);\n    this.score = 0;\n    this.over = false;\n    this.won = false;\n    this.keepPlaying = false; // Add the initial tiles\n\n    this.addStartTiles();\n  } // Update the view\n\n\n  this.actuate();\n}; // Set up the initial tiles to start the game with\n\n\nGameManager.prototype.addStartTiles = function () {\n  for (var i = 0; i < this.startTiles; i++) {\n    this.addRandomTile();\n  }\n}; // Adds a tile in a random position\n\n\nGameManager.prototype.addRandomTile = function () {\n  if (this.grid.cellsAvailable()) {\n    var value = Math.random() < 0.9 ? 2 : 4;\n    var tile = new Tile(this.grid.randomAvailableCell(), value);\n    this.grid.insertTile(tile);\n  }\n}; // Sends the updated grid to the view\n\n\nGameManager.prototype.actuate = function () {\n  if (this.storageManager.getBestScore() < this.score) {\n    this.storageManager.setBestScore(this.score);\n  } // Clear the state when the game is over (game over only, not win)\n\n\n  if (this.over) {\n    this.storageManager.clearGameState();\n  } else {\n    this.storageManager.setGameState(this.serialize());\n  }\n\n  this.view.actuate(this.grid, {\n    score: this.score,\n    over: this.over,\n    won: this.won,\n    bestScore: this.storageManager.getBestScore(),\n    terminated: this.isGameTerminated()\n  });\n}; // Represent the current game as an object\n\n\nGameManager.prototype.serialize = function () {\n  return {\n    grid: this.grid.serialize(),\n    score: this.score,\n    over: this.over,\n    won: this.won,\n    keepPlaying: this.keepPlaying\n  };\n}; // Save all tile positions and remove merger info\n\n\nGameManager.prototype.prepareTiles = function () {\n  this.grid.eachCell(function (x, y, tile) {\n    if (tile) {\n      tile.mergedFrom = null;\n      tile.savePosition();\n    }\n  });\n}; // Move a tile and its representation\n\n\nGameManager.prototype.moveTile = function (tile, cell) {\n  this.grid.cells[tile.x][tile.y] = null;\n  this.grid.cells[cell.x][cell.y] = tile;\n  tile.updatePosition(cell);\n}; // Move tiles on the grid in the specified direction\n\n\nGameManager.prototype.move = function (direction) {\n  // 0: up, 1: right, 2: down, 3: left\n  var self = this;\n  if (this.isGameTerminated()) return; // Don't do anything if the game's over\n\n  var cell, tile;\n  var vector = this.getVector(direction);\n  var traversals = this.buildTraversals(vector);\n  var moved = false; // Save the current tile positions and remove merger information\n\n  this.prepareTiles(); // Traverse the grid in the right direction and move tiles\n\n  traversals.x.forEach(function (x) {\n    traversals.y.forEach(function (y) {\n      cell = {\n        x: x,\n        y: y\n      };\n      tile = self.grid.cellContent(cell);\n\n      if (tile) {\n        var positions = self.findFarthestPosition(cell, vector);\n        var next = self.grid.cellContent(positions.next); // Only one merger per row traversal?\n\n        if (next && next.value === tile.value && !next.mergedFrom) {\n          var merged = new Tile(positions.next, tile.value * 2);\n          merged.mergedFrom = [tile, next];\n          self.grid.insertTile(merged);\n          self.grid.removeTile(tile); // Converge the two tiles' positions\n\n          tile.updatePosition(positions.next); // Update the score\n\n          self.score += merged.value; // The mighty 2048 tile\n\n          if (merged.value === 2048) self.won = true;\n        } else {\n          self.moveTile(tile, positions.farthest);\n        }\n\n        if (!self.positionsEqual(cell, tile)) {\n          moved = true; // The tile moved from its original cell!\n        }\n      }\n    });\n  });\n\n  if (moved) {\n    this.addRandomTile();\n\n    if (!this.movesAvailable()) {\n      this.over = true; // Game over!\n    }\n\n    this.actuate();\n  }\n}; // Get the vector representing the chosen direction\n\n\nGameManager.prototype.getVector = function (direction) {\n  // Vectors representing tile movement\n  var map = {\n    0: {\n      x: 0,\n      y: -1\n    },\n    // Up\n    1: {\n      x: 1,\n      y: 0\n    },\n    // Right\n    2: {\n      x: 0,\n      y: 1\n    },\n    // Down\n    3: {\n      x: -1,\n      y: 0 // Left\n\n    }\n  };\n  return map[direction];\n}; // Build a list of positions to traverse in the right order\n\n\nGameManager.prototype.buildTraversals = function (vector) {\n  var traversals = {\n    x: [],\n    y: []\n  };\n\n  for (var pos = 0; pos < this.size; pos++) {\n    traversals.x.push(pos);\n    traversals.y.push(pos);\n  } // Always traverse from the farthest cell in the chosen direction\n\n\n  if (vector.x === 1) traversals.x = traversals.x.reverse();\n  if (vector.y === 1) traversals.y = traversals.y.reverse();\n  return traversals;\n};\n\nGameManager.prototype.findFarthestPosition = function (cell, vector) {\n  var previous; // Progress towards the vector direction until an obstacle is found\n\n  do {\n    previous = cell;\n    cell = {\n      x: previous.x + vector.x,\n      y: previous.y + vector.y\n    };\n  } while (this.grid.withinBounds(cell) && this.grid.cellAvailable(cell));\n\n  return {\n    farthest: previous,\n    next: cell // Used to check if a merge is required\n\n  };\n};\n\nGameManager.prototype.movesAvailable = function () {\n  return this.grid.cellsAvailable() || this.tileMatchesAvailable();\n}; // Check for available matches between tiles (more expensive check)\n\n\nGameManager.prototype.tileMatchesAvailable = function () {\n  var self = this;\n  var tile;\n\n  for (var x = 0; x < this.size; x++) {\n    for (var y = 0; y < this.size; y++) {\n      tile = this.grid.cellContent({\n        x: x,\n        y: y\n      });\n\n      if (tile) {\n        for (var direction = 0; direction < 4; direction++) {\n          var vector = self.getVector(direction);\n          var cell = {\n            x: x + vector.x,\n            y: y + vector.y\n          };\n          var other = self.grid.cellContent(cell);\n\n          if (other && other.value === tile.value) {\n            return true; // These two tiles can be merged\n          }\n        }\n      }\n    }\n  }\n\n  return false;\n};\n\nGameManager.prototype.positionsEqual = function (first, second) {\n  return first.x === second.x && first.y === second.y;\n};\n\nmodule.exports = GameManager;\n\n},{\"./grid\":6,\"./tile\":11}],6:[function(require,module,exports){\n\"use strict\";\n\nvar Tile = require('./tile');\n\nfunction Grid(size, previousState) {\n  this.size = size;\n  this.cells = previousState ? this.fromState(previousState) : this.empty();\n} // Build a grid of the specified size\n\n\nGrid.prototype.empty = function () {\n  var cells = [];\n\n  for (var x = 0; x < this.size; x++) {\n    var row = cells[x] = [];\n\n    for (var y = 0; y < this.size; y++) {\n      row.push(null);\n    }\n  }\n\n  return cells;\n};\n\nGrid.prototype.fromState = function (state) {\n  var cells = [];\n\n  for (var x = 0; x < this.size; x++) {\n    var row = cells[x] = [];\n\n    for (var y = 0; y < this.size; y++) {\n      var tile = state[x][y];\n      row.push(tile ? new Tile(tile.position, tile.value) : null);\n    }\n  }\n\n  return cells;\n}; // Find the first available random position\n\n\nGrid.prototype.randomAvailableCell = function () {\n  var cells = this.availableCells();\n\n  if (cells.length) {\n    return cells[Math.floor(Math.random() * cells.length)];\n  }\n};\n\nGrid.prototype.availableCells = function () {\n  var cells = [];\n  this.eachCell(function (x, y, tile) {\n    if (!tile) {\n      cells.push({\n        x: x,\n        y: y\n      });\n    }\n  });\n  return cells;\n}; // Call callback for every cell\n\n\nGrid.prototype.eachCell = function (callback) {\n  for (var x = 0; x < this.size; x++) {\n    for (var y = 0; y < this.size; y++) {\n      callback(x, y, this.cells[x][y]);\n    }\n  }\n}; // Check if there are any cells available\n\n\nGrid.prototype.cellsAvailable = function () {\n  return !!this.availableCells().length;\n}; // Check if the specified cell is taken\n\n\nGrid.prototype.cellAvailable = function (cell) {\n  return !this.cellOccupied(cell);\n};\n\nGrid.prototype.cellOccupied = function (cell) {\n  return !!this.cellContent(cell);\n};\n\nGrid.prototype.cellContent = function (cell) {\n  if (this.withinBounds(cell)) {\n    return this.cells[cell.x][cell.y];\n  } else {\n    return null;\n  }\n}; // Inserts a tile at its position\n\n\nGrid.prototype.insertTile = function (tile) {\n  this.cells[tile.x][tile.y] = tile;\n};\n\nGrid.prototype.removeTile = function (tile) {\n  this.cells[tile.x][tile.y] = null;\n};\n\nGrid.prototype.withinBounds = function (position) {\n  return position.x >= 0 && position.x < this.size && position.y >= 0 && position.y < this.size;\n};\n\nGrid.prototype.serialize = function () {\n  var cellState = [];\n\n  for (var x = 0; x < this.size; x++) {\n    var row = cellState[x] = [];\n\n    for (var y = 0; y < this.size; y++) {\n      row.push(this.cells[x][y] ? this.cells[x][y].serialize() : null);\n    }\n  }\n\n  return {\n    size: this.size,\n    cells: cellState\n  };\n};\n\nmodule.exports = Grid;\n\n},{\"./tile\":11}],7:[function(require,module,exports){\n\"use strict\";\n\nfunction HTMLView() {\n  this.container = document.createElement('div');\n  this.container.classList.add('container');\n  this.gameContainer = document.createElement(\"div\");\n  this.gameContainer.classList.add('game-container');\n  this.container.append(this.gameContainer); // Message Container\n\n  this.messageContainer = document.createElement('div');\n  this.messageContainer.classList.add('game-message');\n  this.messageContainerParagraph = document.createElement('p');\n  this.messageContainer.append(this.messageContainerParagraph);\n  this.gameContainer.append(this.messageContainer); // -- Lower\n\n  var lower = document.createElement('div');\n  lower.classList.add('lower');\n  this.messageContainer.append(lower); // ------ Keep playing button\n\n  this.keepPlayingButton = document.createElement('a');\n  this.keepPlayingButton.classList.add('keep-playing-button');\n  this.keepPlayingButton.textContent = 'Keep going';\n  lower.append(this.keepPlayingButton); // ------ Retry button\n\n  this.retryButton = document.createElement('a');\n  this.retryButton.classList.add('retry-button');\n  this.retryButton.textContent = 'Try again';\n  lower.append(this.retryButton);\n  this.messageContainer.append(lower); // Grid container\n\n  var size = 4;\n  var gridContainer = document.createElement('div');\n  gridContainer.classList.add('grid-container');\n\n  for (var i = 0; i !== size; i += 1) {\n    var row = document.createElement('div');\n    row.classList.add('grid-row');\n    gridContainer.append(row);\n\n    for (var j = 0; j !== size; j += 1) {\n      var cell = document.createElement('div');\n      cell.classList.add('grid-cell');\n      row.append(cell);\n    }\n  }\n\n  this.gameContainer.append(gridContainer); //Tile container\n\n  this.tileContainer = document.createElement('div');\n  this.tileContainer.classList.add('tile-container');\n  this.gameContainer.append(this.tileContainer); // Restart button\n\n  this.restartButton = document.createElement('a');\n  this.restartButton.classList.add('restart-button');\n  this.restartButton.textContent = 'New Game';\n  this.container.append(this.restartButton); // Score wrapper\n\n  var scoreWrapper = document.createElement('div');\n  scoreWrapper.classList.add('score-wrapper');\n  scoreWrapper.classList.add('score-wrapper-score');\n  var scoreLabel = document.createElement('div');\n  scoreLabel.classList.add('label');\n  scoreLabel.textContent = 'Score';\n  scoreWrapper.append(scoreLabel);\n  this.scoreContainer = document.createElement('div');\n  this.scoreContainer.classList.add('score-container');\n  this.scoreContainer.textContent = '0';\n  scoreWrapper.append(this.scoreContainer);\n  this.container.append(scoreWrapper); // Hi-score wrapper\n\n  var hiScoreWrapper = document.createElement('div');\n  hiScoreWrapper.classList.add('score-wrapper');\n  hiScoreWrapper.classList.add('score-wrapper-best');\n  var hiScoreLabel = document.createElement('div');\n  hiScoreLabel.classList.add('label');\n  hiScoreLabel.textContent = 'Hi-Score';\n  hiScoreWrapper.append(hiScoreLabel);\n  this.bestContainer = document.createElement('div');\n  this.bestContainer.classList.add('best-container');\n  this.bestContainer.textContent = '0';\n  hiScoreWrapper.append(this.bestContainer);\n  this.container.append(hiScoreWrapper); // Help text\n\n  this.helpText = document.createElement('div');\n  this.helpText.classList.add('helping-text');\n  this.helpText.textContent = 'Swipe over the board to merge tiles with the same picture.';\n  this.container.append(this.helpText); // Help hand\n\n  this.helpHand = document.createElement('div');\n  this.helpHand.classList.add('helping-hand');\n  this.container.append(this.helpHand);\n  this.helpTimeout = null;\n  this.score = 0;\n}\n\nHTMLView.prototype.actuate = function (grid, metadata) {\n  var self = this;\n  window.requestAnimationFrame(function () {\n    self.clearContainer(self.tileContainer);\n    grid.cells.forEach(function (column) {\n      column.forEach(function (cell) {\n        if (cell) {\n          self.addTile(cell);\n        }\n      });\n    });\n    self.updateScore(metadata.score);\n    self.updateBestScore(metadata.bestScore);\n\n    if (metadata.terminated) {\n      if (metadata.over) {\n        self.message(false); // You lose\n      } else if (metadata.won) {\n        self.message(true); // You win!\n      }\n    }\n  });\n}; // Continues the game (both restart and keep playing)\n\n\nHTMLView.prototype.continueGame = function () {\n  this.clearMessage();\n};\n\nHTMLView.prototype.clearContainer = function (container) {\n  while (container.firstChild) {\n    container.removeChild(container.firstChild);\n  }\n};\n\nHTMLView.prototype.addTile = function (tile) {\n  var self = this;\n  var wrapper = document.createElement(\"div\");\n  var inner = document.createElement(\"div\");\n  var position = tile.previousPosition || {\n    x: tile.x,\n    y: tile.y\n  };\n  var positionClass = this.positionClass(position); // We can't use classlist because it somehow glitches when replacing classes\n\n  var classes = [\"tile\", \"tile-\" + tile.value, positionClass];\n  if (tile.value > 2048) classes.push(\"tile-super\");\n  this.applyClasses(wrapper, classes);\n  inner.classList.add(\"tile-inner\");\n  inner.textContent = tile.value;\n\n  if (tile.previousPosition) {\n    // Make sure that the tile gets rendered in the previous position first\n    window.requestAnimationFrame(function () {\n      classes[2] = self.positionClass({\n        x: tile.x,\n        y: tile.y\n      });\n      self.applyClasses(wrapper, classes); // Update the position\n    });\n  } else if (tile.mergedFrom) {\n    classes.push(\"tile-merged\");\n    this.applyClasses(wrapper, classes); // Render the tiles that merged\n\n    tile.mergedFrom.forEach(function (merged) {\n      self.addTile(merged);\n    });\n  } else {\n    classes.push(\"tile-new\");\n    this.applyClasses(wrapper, classes);\n  } // Add the inner part of the tile to the wrapper\n\n\n  wrapper.appendChild(inner); // Put the tile on the board\n\n  this.tileContainer.appendChild(wrapper);\n};\n\nHTMLView.prototype.applyClasses = function (element, classes) {\n  element.setAttribute(\"class\", classes.join(\" \"));\n};\n\nHTMLView.prototype.normalizePosition = function (position) {\n  return {\n    x: position.x + 1,\n    y: position.y + 1\n  };\n};\n\nHTMLView.prototype.positionClass = function (position) {\n  position = this.normalizePosition(position);\n  return \"tile-position-\" + position.x + \"-\" + position.y;\n};\n\nHTMLView.prototype.updateScore = function (score) {\n  this.clearContainer(this.scoreContainer);\n  var difference = score - this.score;\n  this.score = score;\n  this.scoreContainer.textContent = this.score;\n\n  if (difference > 0) {\n    var addition = document.createElement(\"div\");\n    addition.classList.add(\"score-addition\");\n    addition.textContent = \"+\" + difference;\n    this.scoreContainer.appendChild(addition);\n  }\n};\n\nHTMLView.prototype.updateBestScore = function (bestScore) {\n  this.bestContainer.textContent = bestScore;\n};\n\nHTMLView.prototype.message = function (won) {\n  var type = won ? \"game-won\" : \"game-over\";\n  var message = won ? \"You win!\" : \"Game over!\";\n  this.messageContainer.classList.add(type);\n  this.messageContainerParagraph.textContent = message;\n};\n\nHTMLView.prototype.clearMessage = function () {\n  // IE only takes one value to remove at a time.\n  this.messageContainer.classList.remove(\"game-won\");\n  this.messageContainer.classList.remove(\"game-over\");\n};\n\nHTMLView.prototype.showHelp = function () {\n  window.setTimeout(function () {\n    this.helpHand.classList.add('shown');\n    this.helpText.classList.add('shown');\n  }.bind(this), 0);\n};\n\nHTMLView.prototype.hideHelp = function () {\n  if (this.helpTimeout !== null) {\n    window.clearTimeout(this.helpTimeout);\n    this.helpTimeout = null;\n  }\n\n  this.helpHand.classList.remove('shown');\n  this.helpText.classList.remove('shown');\n};\n\nHTMLView.prototype.blinkHelp = function () {\n  this.hideHelp();\n  this.helpTimeout = window.setTimeout(this.hideHelp.bind(this), 6000);\n  this.showHelp();\n};\n\nmodule.exports = HTMLView;\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nfunction InputManager() {\n  this.events = {};\n\n  if (window.navigator.msPointerEnabled) {\n    //Internet Explorer 10 style\n    this.eventTouchstart = \"MSPointerDown\";\n    this.eventTouchmove = \"MSPointerMove\";\n    this.eventTouchend = \"MSPointerUp\";\n  } else {\n    this.eventTouchstart = \"touchstart\";\n    this.eventTouchmove = \"touchmove\";\n    this.eventTouchend = \"touchend\";\n  }\n}\n\nInputManager.prototype.on = function (event, callback) {\n  if (!this.events[event]) {\n    this.events[event] = [];\n  }\n\n  this.events[event].push(callback);\n};\n\nInputManager.prototype.emit = function (event, data) {\n  var callbacks = this.events[event];\n\n  if (callbacks) {\n    callbacks.forEach(function (callback) {\n      callback(data);\n    });\n  }\n};\n\nInputManager.prototype.bindKeyboard = function () {\n  var self = this;\n  var map = {\n    38: 0,\n    // Up\n    39: 1,\n    // Right\n    40: 2,\n    // Down\n    37: 3,\n    // Left\n    75: 0,\n    // Vim up\n    76: 1,\n    // Vim right\n    74: 2,\n    // Vim down\n    72: 3,\n    // Vim left\n    87: 0,\n    // W\n    68: 1,\n    // D\n    83: 2,\n    // S\n    65: 3 // A\n\n  }; // Respond to direction keys\n\n  document.addEventListener(\"keydown\", function (event) {\n    var modifiers = event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;\n    var mapped = map[event.which];\n\n    if (!modifiers) {\n      if (mapped !== undefined) {\n        event.preventDefault();\n        self.emit(\"move\", mapped);\n      }\n    } // R key restarts the game\n\n\n    if (!modifiers && event.which === 82) {\n      self.restart.call(self, event);\n    }\n  });\n};\n\nInputManager.prototype.bindGameContainer = function (gameContainer) {\n  var self = this; // Respond to swipe events\n\n  var touchStartClientX, touchStartClientY;\n  gameContainer.addEventListener(this.eventTouchstart, function (event) {\n    if (!window.navigator.msPointerEnabled && event.touches.length > 1 || event.targetTouches.length > 1) {\n      return; // Ignore if touching with more than 1 finger\n    }\n\n    if (window.navigator.msPointerEnabled) {\n      touchStartClientX = event.pageX;\n      touchStartClientY = event.pageY;\n    } else {\n      touchStartClientX = event.touches[0].clientX;\n      touchStartClientY = event.touches[0].clientY;\n    }\n\n    event.preventDefault();\n  });\n  gameContainer.addEventListener(this.eventTouchmove, function (event) {\n    event.preventDefault();\n  });\n  gameContainer.addEventListener(this.eventTouchend, function (event) {\n    if (!window.navigator.msPointerEnabled && event.touches.length > 0 || event.targetTouches.length > 0) {\n      return; // Ignore if still touching with one or more fingers\n    }\n\n    var touchEndClientX, touchEndClientY;\n\n    if (window.navigator.msPointerEnabled) {\n      touchEndClientX = event.pageX;\n      touchEndClientY = event.pageY;\n    } else {\n      touchEndClientX = event.changedTouches[0].clientX;\n      touchEndClientY = event.changedTouches[0].clientY;\n    }\n\n    var dx = touchEndClientX - touchStartClientX;\n    var absDx = Math.abs(dx);\n    var dy = touchEndClientY - touchStartClientY;\n    var absDy = Math.abs(dy);\n\n    if (Math.max(absDx, absDy) > 10) {\n      // (right : left) : (down : up)\n      self.emit(\"move\", absDx > absDy ? dx > 0 ? 1 : 3 : dy > 0 ? 2 : 0);\n    }\n  });\n};\n\nInputManager.prototype.bindRestartButton = function (button) {\n  this.bindButtonPress(button, this.restart);\n};\n\nInputManager.prototype.bindKeepPlayingButton = function (button) {\n  this.bindButtonPress(button, this.keepPlaying);\n};\n\nInputManager.prototype.restart = function (event) {\n  event.preventDefault();\n  this.emit(\"restart\");\n};\n\nInputManager.prototype.keepPlaying = function (event) {\n  event.preventDefault();\n  this.emit(\"keepPlaying\");\n};\n\nInputManager.prototype.bindButtonPress = function (button, fn) {\n  button.addEventListener(\"click\", fn.bind(this));\n  button.addEventListener(this.eventTouchend, fn.bind(this));\n};\n\nmodule.exports = InputManager;\n\n},{}],9:[function(require,module,exports){\n\"use strict\";\n\nwindow.fakeStorage = {\n  _data: {},\n  setItem: function setItem(id, val) {\n    return this._data[id] = String(val);\n  },\n  getItem: function getItem(id) {\n    return this._data.hasOwnProperty(id) ? this._data[id] : undefined;\n  },\n  removeItem: function removeItem(id) {\n    return delete this._data[id];\n  },\n  clear: function clear() {\n    return this._data = {};\n  }\n};\n\nfunction LocalStorageManager() {\n  this.bestScoreKey = \"bestScore\";\n  this.gameStateKey = \"gameState\";\n  var supported = this.localStorageSupported();\n  this.storage = supported ? window.localStorage : window.fakeStorage;\n}\n\nLocalStorageManager.prototype.localStorageSupported = function () {\n  var testKey = \"test\";\n\n  try {\n    var storage = window.localStorage;\n    storage.setItem(testKey, \"1\");\n    storage.removeItem(testKey);\n    return true;\n  } catch (error) {\n    return false;\n  }\n}; // Best score getters/setters\n\n\nLocalStorageManager.prototype.getBestScore = function () {\n  return this.storage.getItem(this.bestScoreKey) || 0;\n};\n\nLocalStorageManager.prototype.setBestScore = function (score) {\n  this.storage.setItem(this.bestScoreKey, score);\n}; // Game state getters/setters and clearing\n\n\nLocalStorageManager.prototype.getGameState = function () {\n  var stateJSON = this.storage.getItem(this.gameStateKey);\n  return stateJSON ? JSON.parse(stateJSON) : null;\n};\n\nLocalStorageManager.prototype.setGameState = function (gameState) {\n  this.storage.setItem(this.gameStateKey, JSON.stringify(gameState));\n};\n\nLocalStorageManager.prototype.clearGameState = function () {\n  this.storage.removeItem(this.gameStateKey);\n};\n\nmodule.exports = LocalStorageManager;\n\n},{}],10:[function(require,module,exports){\n\"use strict\";\n\nrequire('./bind_polyfill');\n\nrequire('./classlist_polyfill');\n\nrequire('./animframe_polyfill');\n\nrequire('./application');\n\n},{\"./animframe_polyfill\":1,\"./application\":2,\"./bind_polyfill\":3,\"./classlist_polyfill\":4}],11:[function(require,module,exports){\n\"use strict\";\n\nfunction Tile(position, value) {\n  this.x = position.x;\n  this.y = position.y;\n  this.value = value || 2;\n  this.previousPosition = null;\n  this.mergedFrom = null; // Tracks tiles that merged together\n}\n\nTile.prototype.savePosition = function () {\n  this.previousPosition = {\n    x: this.x,\n    y: this.y\n  };\n};\n\nTile.prototype.updatePosition = function (position) {\n  this.x = position.x;\n  this.y = position.y;\n};\n\nTile.prototype.serialize = function () {\n  return {\n    position: {\n      x: this.x,\n      y: this.y\n    },\n    value: this.value\n  };\n};\n\nmodule.exports = Tile;\n\n},{}]},{},[10]);\n"]}